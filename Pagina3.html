<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peluquería</title>
    <link rel="stylesheet" href="Pagina3.css">
</head>
<body>
    <h1>Debes aparecer así en la cámara</h1>

    <img class="tijera" src="tijerita 2.png">
    <img class="Joni" src="Joni.png">

    <button class="openCameraBtn">Abrir Cámara</button>

    <video id="videoElement" width="640" height="480" autoplay></video>

    <script>
        const openCameraBtn = document.querySelector(".openCameraBtn");
        const videoElement = document.querySelector("#videoElement");

        openCameraBtn.addEventListener("click", () => {
            // Solicitar acceso a la cámara
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    // Asignar el flujo de la cámara al elemento de video
                    videoElement.srcObject = stream;

                    // Llamar al servidor para iniciar main.py
                    fetch("/run-script")
                        .then(response => response.json())
                        .then(data => console.log(data.message))
                        .catch(error => console.error("Error:", error));

                    // Esperar 5 segundos y luego redirigir
                    setTimeout(() => {
                        // Detener el flujo de la cámara antes de redirigir
                        let tracks = stream.getTracks();
                        tracks.forEach(track => track.stop());
                        // Redirigir a la página final
                        window.location.href = "Pagina7.html"; // Asegúrate del nombre exacto del archivo
                    }, 5000);
                })
                .catch(error => {
                    console.error("Error al acceder a la cámara:", error);
                });
        });
    </script>
</body>
</html>

